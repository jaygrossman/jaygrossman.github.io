<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="icon" href="/assets/images/logo.png"
><link rel="shortcut icon" href="/assets/images/favicon.ico" />

<title>Creating Singer Tap to Capture Ebay Completed Items | JayGrossman.com</title>

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Creating Singer Tap to Capture Ebay Completed Items | JayGrossman.com</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Creating Singer Tap to Capture Ebay Completed Items" />
<meta name="author" content="jay" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Creating Singer Tap to Capture Ebay Completed Items" />
<meta property="og:description" content="Creating Singer Tap to Capture Ebay Completed Items" />
<link rel="canonical" href="http://localhost:4000/creating-singer-tap-to-capture-ebay-completed-items/" />
<meta property="og:url" content="http://localhost:4000/creating-singer-tap-to-capture-ebay-completed-items/" />
<meta property="og:site_name" content="JayGrossman.com" />
<meta property="og:image" content="http://localhost:4000/assets/images/headers/tap-ebaycompleted.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-06-19T00:00:00-04:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/assets/images/headers/tap-ebaycompleted.png" />
<meta property="twitter:title" content="Creating Singer Tap to Capture Ebay Completed Items" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"jay"},"dateModified":"2023-06-19T00:00:00-04:00","datePublished":"2023-06-19T00:00:00-04:00","description":"Creating Singer Tap to Capture Ebay Completed Items","headline":"Creating Singer Tap to Capture Ebay Completed Items","image":"http://localhost:4000/assets/images/headers/tap-ebaycompleted.png","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/creating-singer-tap-to-capture-ebay-completed-items/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/logo.png"},"name":"jay"},"url":"http://localhost:4000/creating-singer-tap-to-capture-ebay-completed-items/"}</script>
<!-- End Jekyll SEO tag -->


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
<link href="/assets/css/screen.css" rel="stylesheet">

<link href="/assets/css/main.css" rel="stylesheet">

<script src="/assets/js/jquery.min.js"></script>

</head>




<body class="layout-post">
	<!-- defer loading of font and font awesome -->
	<noscript id="deferred-styles">
		<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	</noscript>


<!-- Begin Menu Navigation
================================================== -->
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">

    <div class="container pr-0">

    <!-- Begin Logo -->
    <!--<a class="navbar-brand" href="/">
    <img src="/assets/images/logo.png" alt="JayGrossman.com">
    </a>-->
    <!-- End Logo -->

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarMediumish">

        <!-- Begin Menu -->

            <ul class="navbar-nav ml-auto">

                
                <li class="nav-item">
                
                <a class="nav-link" href="/index.html">Blog</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" href="/about">About</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" href="/about/#projects">Projects</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/favorites">Favorite Posts</a>
                    </li>

                <script src="/assets/js/lunr.js"></script>


<style>
    .lunrsearchresult .title {color: #d9230f;}
    .lunrsearchresult .url {color: silver;}
    .lunrsearchresult a {display: block; color: #777;}
    .lunrsearchresult a:hover, .lunrsearchresult a:focus {text-decoration: none;}
    .lunrsearchresult a:hover .title {text-decoration: underline;}
</style>


<form class="bd-search" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
    <input type="text" class="form-control text-small launch-modal-search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Type and enter..."/>
</form>

<div id="lunrsearchresults">
    <ul></ul>
</div>

<script src="/assets/js/lunrsearchengine.js"></script>

            </ul>

        <!-- End Menu -->

    </div>

    </div>
</nav>
<!-- End Navigation
================================================== -->

<div class="site-content">

<div class="container">

<!-- Site Title
================================================== -->
<div class="mainheading">
    <h1 class="sitetitle"><a href="/" style="color: #000000;">JayGrossman.com</a></h1>
    <p class="lead">
        Sharing My Fun with Software, Data, Sports, & Collecting!
    </p>
</div>

<!-- Content
================================================== -->
<div class="main-content">
    <!-- Begin Article
================================================== -->
<div class="container">
    <div class="row">

        <!-- Post Share -->
        <div class="col-md-2 pl-0">
            <div class="share sticky-top sticky-top-offset">
    <p>
        Share
    </p>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=Creating Singer Tap to Capture Ebay Completed Items&url=http://localhost:4000/creating-singer-tap-to-capture-ebay-completed-items/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fab fa-twitter"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://facebook.com/sharer.php?u=http://localhost:4000/creating-singer-tap-to-capture-ebay-completed-items/" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                <i class="fab fa-facebook-f"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/creating-singer-tap-to-capture-ebay-completed-items/" onclick="window.open(this.href, 'width=550,height=435');return false;">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </li>

    </ul>
    
</div>

        </div>

        <!-- Post -->
        

        <div class="col-md-9 flex-first flex-md-unordered">
            <div class="mainheading">

                <!-- Author Box -->
                
                <div class="row post-top-meta">
                    <div class="col-xs-12 text-center text-md-left mb-4 mb-md-0">
                        
                        <img class="author-thumb" src="/assets/images/jay_headshot.png" alt="Jay Grossman">
                        
                    </div>
                    <div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left">
                        <a class="link-dark" href="/about">Jay Grossman</a><br>
                       
                        Published on: 
                <span class="post-date"><time class="post-date" datetime="2023-06-19">19 Jun 2023</time></span>           
                <br>
                <ul class="tags" style="margin:0px;">
                    
                    
                    <li>
                        <a class="smoothscroll" href="/tags#data-engineering">#data engineering</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/tags#ebay">#ebay</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/tags#python">#python</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/tags#singer">#singer</a>
                    </li>
                    
                </ul>
            
                    </div>
                </div>
                

                <!-- Post Title -->
                <h1 class="posttitle">Creating Singer Tap to Capture Ebay Completed Items</h1>

            </div>

            <!-- Adsense if enabled from _config.yml (change your pub id and slot) -->
            
            <!-- End Adsense -->

            <!-- Post Featured Image -->
            

            
            <img class="featured-image img-fluid" src="/assets/images/headers/tap-ebaycompleted.png" alt="Creating Singer Tap to Capture Ebay Completed Items">
            

            
            <!-- End Featured Image -->

            <!-- Post Content -->
            <div class="article-post">
                <!-- Toc if any -->
                
                <!-- End Toc -->
                <h3>What is Singer</h3>
<p>The <a href="https://www.singer.io/" target="_blank">Singer specification</a> bills itself as <em>"the open-source standard for writing scripts that move data"</em>. <a href="https://transferwise.github.io/pipelinewise/" target="_blank">PipelineWise</a> and <a href="https://meltano.com/" target="_blank">Meltano</a> are popular open source platforms that use the Singer specification to accommodate ingest and replication of data from various sources to various destinations.</p>
<p>Singer describes how data extraction scripts&mdash;called <strong>"taps"</strong>&nbsp;&mdash;and data loading scripts&mdash;called <strong>"targets"</strong>&mdash; should communicate, allowing them to be used in any combination to move data from any source to any destination. Send data between databases, web APIs, files, queues, and just about anything else you can think of.</p>

<p><img src="/assets/images/ebaytap_1.png" alt="" /><br />
<small>ETL Pipeline in Singer, image credit: <a href="https://blog.panoply.io/etl-with-singer-a-tutorial" target="_blank">panoply</a></small></p>

<h3>Completed Items on eBay</h3>
<p>For over 20 years, eBay has allowed users to search by keyword for auctions and Buy It Now listings that have recently ended. This is very helpful to provide buyer and sellers with a directional idea of how much comparable items sell for.</p>
<p>On the left side of any search page (near the bottom of the search results), users have the ability to filter by Completed Items as shown below:</p>

<p><img src="/assets/images/ebaytap_2.png" alt="" /></p>

<p>The screen below shows a search for the search term "iphone 14":</p>

<p><img src="/assets/images/ebaytap_3.png" alt="" /><br />
<small>URL:&nbsp;<a href="https://www.ebay.com/sch/i.html?LH_Complete=1&amp;_nkw=iphone+14" target="_blank">https://www.ebay.com/sch/i.html?LH_Complete=1&amp;_nkw=iphone+14</a></small></p>

<h3>The Challenge</h3>
<p>For a long time I've wanted a standard method to be able to capture data about items that have sold on eBay and have an easy + repeatable way to save the data (to files, a database, etc.). I have pieced together various scripts in different languages (python, powershell, C#, php) at different times to accomplish this, but I wanted it to be based off a more standard and extensible framework.</p>
<p>eBay offers&nbsp;<a href="https://developer.ebay.com/develop/apis" target="_blank">developer APIs</a>&nbsp;to query their data which I have used. While I could use the API's&nbsp;<a href="https://developer.ebay.com/devzone/finding/callref/findCompletedItems.html" target="_blank">findCompletedItems</a>&nbsp;end point, it is a far more straight forward implementation and faster learning opportunity for me to use some common python libraries to get the data from eBay's public web site.</p>
<div>&nbsp;</div>
<h3>tap-ebaycompleted</h3>
<p>Code for this Singer Tap is posted on github (click on image below):</p>

<p><a href="https://github.com/jaygrossman/tap-ebaycompleted" target="_blank"><img src="/assets/images/github_tap-completed.png" alt="" style="border:1px solid blue;" /></a></p>

<h4>Project Scope</h4>
<p>So the goal is to create a Singer tap that will allow us to generate out properly formatted JSON data with the details of the listing, that can be consumed by a Singer target (such as writing to a .csv file, an API or PostGres database). Below is a visual illustration:</p>

<p><img src="/assets/images/ebaytap_5.png" alt="" /></p>

<h4>Helpful links to get background on Developing Singer Taps</h4>
<ul>
<li>Singer provides&nbsp;<a href="https://github.com/singer-io/getting-started/blob/master/docs/RUNNING_AND_DEVELOPING.md#developing-a-tap" target="_blank">getting started docs</a>&nbsp;on creating taps.&nbsp;</li>
<li>Meltano provides <a href="https://sdk.meltano.com/en/latest/code_samples.html" target="_blank">code samples</a> for developing taps&nbsp;</li>
</ul>
<div>There are 2 functions in the <a href="https://github.com/singer-io/singer-python" target="_blank">singer python library</a>&nbsp;for my simple tap that we must care about:</div>
<div><ol>
<li>singer.write_schema - responsible for defining the JSON schema that data will be outputted</li>
<li>singer.write_records - responsible for outputting each record (data row)</li>
</ol></div>
<h4>&nbsp;</h4>
<h4>Setting up development for Singer Tap</h4>
<p>In order to develop a tap, we need to install the Singer library:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>pip install singer-python
</pre></td></tr></tbody></table></code></pre></div></div>

<p>&nbsp;Next we'll install <a href="https://www.cookiecutter.io/" target="_blank">cookiecutter</a> and download the <a href="https://github.com/singer-io/singer-tap-template" target="_blank">tap template</a> to give us a starting point:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>pip install cookiecutter
cookiecutter https://github.com/singer-io/singer-tap-template.git
project_name [e.g. 'tap-facebook']: tap-ebaycompleted
package_name [tap_ebaycompleted]:
</pre></td></tr></tbody></table></code></pre></div></div>

<h4>Defining the schema</h4>
<p>The JSON schema defines the structure that the data will be outputted by the tap. Below I am writing a small inline python function to do so:&nbsp;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre>def get_schema():
schema = {
    "properties": {
        "search_term": {"type": "string"},
        "title": {"type": "string"},
        "price": {"type": "string"},
        "bids": {"type": "string"},
        "buy_it_now": {"type": "boolean"},
        "condition": {"type": "string"},
        "image": {"type": "string"},
        "link": {"type": "string"},
        "end_date": {"type": "string"}
        "has_sold": {"type": "boolean"}
        "id": {"type": "string"}
        }
    }
return schema
</pre></td></tr></tbody></table></code></pre></div></div>

<p>We later call this function to create the schema object:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>schema = get_schema()
singer.write_schema("completed_item_schema", schema, "id")
</pre></td></tr></tbody></table></code></pre></div></div>

<h4>Getting data from eBay's Completed Items Search Results</h4>
<p>In python, there are a few different libraries to parse the contents of a web page. In this tap, I use:</p>
<ul>
<li><a href="https://requests.readthedocs.io/en/latest/" target="_blank">requests</a>&nbsp;for getting the HTML of the page&nbsp;</li>
<li><a href="https://beautiful-soup-4.readthedocs.io/en/latest/" target="_blank">BeautifulSoup 4</a>&nbsp;for parsing the elements on the page</li>
</ul>
<p>While I added some extra logic in the actual tap, below will provide the basic idea of how we can parse the page if you are new to these libraries:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre></td><td class="rouge-code"><pre>search_term = 'iphone 13'
url = "https://www.ebay.com/sch/i.html?LH_Complete=1&amp;_sop=13&amp;_nkw={search_term}"

response = requests.get(url)
html_content = str(response.content)
soup = BeautifulSoup(html_content, "html.parser")

# Each completed item is within a &lt;li&gt; tag with class=s-item s-item__pl-on-bottom
listings = soup.find_all("li", class_="s-item s-item__pl-on-bottom")

# Iterate over completed listings
for listing in listings:
    title = listing.find("div", class_="s-item__title").text
    price = listing.find("span", class_="s-item__price").text
    condition = listing.find("span", class_="SECONDARY_INFO").text
    image= listing.find("img")['src']
    link = listing.find("a", class_="s-item__link")['href']
    id = link[0:link.index("?")].replace("https://www.ebay.com/itm/", "")
    bids = ""
    try:
        bids = listing.find("span", class_="s-item__bids s-item__bidCount").text
    except:
        bids = ""
    buy_it_now = False
    try:
        if listing.find("span", class_="s-item__dynamic s-item__buyItNowOption").text == "Buy It Now":
            buy_it_now = True
    except:
        buy_it_now = False
    has_sold = False
    try:
        if listing.find("div", class_="s-item__title--tag").find("span", class_="clipped").text == "Sold Item":
            has_sold = True
            end_date=listing.find("div", class_="s-item__title--tag").find("span", class_="POSITIVE").text
        else:
            end_date = listing.find("div", class_="s-item__title--tag").find("span", class_="NEGATIVE").text
    except:
        end_date=""

    record = {
        "search_term": search_term,
        "title": title,
        "price": price,
        "condition": condition,
        "image": image,
        "link": link,
        "id": id,
        "bids": bids,
        "buy_it_now": buy_it_now,
        "end_date": end_date,
        "has_sold": has_sold
    } 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>We can then pass the schema ("completed_item_schema") that we defined earlier and the record to singer.write_records:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>singer.write_records("completed_item_schema", [record])
</pre></td></tr></tbody></table></code></pre></div></div>

<h4>Building and Configuring the Tap</h4>
<p>The template created a directory named tap-ebaycompleted. Since this is a very simple tap, I removed the contents and created a single file called <a href="https://github.com/jaygrossman/tap-ebaycompleted/blob/main/tap_ebaycompleted/__init__.py" target="_blank">__init__.py</a>. In the main function, I provided the logic specified in the sections above with a little bit of additional logic.</p>
<p><span style="text-decoration: underline;">Create a configuration file</span></p>
<p>There is a template you can use at <em>config.json.example</em>, just copy it to <em>config.json</em> in the repo root and update the following values:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>{
    "search_terms": ["iphone 13", "iphone 14"],
    "page_size": 240,
    "min_wait": 2.1,
    "max_wait": 4.4
} 
</pre></td></tr></tbody></table></code></pre></div></div>

<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td style="padding: 5px;"><strong>Variable</strong></td>
<td style="padding: 5px;"><strong>Description</strong></td>
</tr>
<tr>
<td style="padding: 5px;">search_terms</td>
<td style="padding: 5px;">list of terms that the tap will search for <strong>REQUIRED</strong></td>
</tr>
<tr>
<td style="padding: 5px;">page_size</td>
<td style="padding: 5px;">number of records to return (values can be 240,120,60), default is 120</td>
</tr>
<tr>
<td style="padding: 5px;">min_wait</td>
<td style="padding: 5px;">minimum amount of time between searches, default is 2 seconds</td>
</tr>
<tr>
<td style="padding: 5px;">max_wait</td>
<td style="padding: 5px;">maximum amount of time between searches, default is 5 seconds</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h4>Running the Tap</h4>
<p>Let's create a virtual environment to run our tap within:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>cd tap-ebaycompleted
python3 -m venv ~/.virtualenvs/tap-ebaycompleted
source ~/.virtualenvs/tap-ebaycompleted/bin/activate
git clone git@github.com:jaygrossman/tap-ebaycompleted.git
cd tap-ebaycompleted
pip3 install requests
pip3 install BeautifulSoup4
pip3 install .
deactivate 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>We can run our tap with the following command:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>~/.virtualenvs/tap-ebaycompleted/bin/tap-ebaycompleted -c config.json
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Below is a sample record representing a completed item:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>{
    "type": "RECORD", 
"stream": 
"completed_item_schema", 
"record": {
    "search_term": "iphone 13", 
    "title": "Apple iPhone 13 - 128GB - Midnight", 
    "price": "$411.00", 
    "condition": "Pre-Owned", 
    "image": "https://shorturl.at/bqrsK", 
    "link": "https://www.ebay.com/itm/314645218752", 
    "id": "314645218752", 
    "bids": "", 
    "buy_it_now": false
    "end_date": "Jun 21, 2023"
    "has_sold": True
    }
}
</pre></td></tr></tbody></table></code></pre></div></div>

<h4>Running the Tap with a Target to Export the Data to a .csv File</h4>
<p>Install target-csv:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>python3 -m venv ~/.virtualenvs/target-csv
source ~/.virtualenvs/target-csv/bin/activate
pip3 install target-csv
deactivate
</pre></td></tr></tbody></table></code></pre></div></div>

<p>We can run our tap piped to target-csv with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>~/.virtualenvs/tap-ebaycompleted/bin/tap-ebaycompleted -c config.json |
~/.virtualenvs/target-csv/bin/target-csv 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Below is the first couple of lines of the .csv file the command generated:</p>
<p style="padding-left: 30px;">search_term,title,price,condition,image,link,id,bids,buy_it_now,end_date,has_sold</p>
<p style="padding-left: 30px;">iphone 13,Apple iPhone 13 - 128GB - Midnight (Verizon),$170.00,Parts Only,https://i.ebayimg.com/thumbs/images/g/AKkAAOSw55lkhLVt/s-l300.jpg,https://www.ebay.com/itm/225623521919,225623521919,0 bids,False,"Jun 21, 2023",True</p>

<h3>Conclusions and What's Next</h3>
<ul>
<li>You should not consider this a production quality tap. eBay often changes the format of the HTML on their search results page and this Tap will need to be updated when this occurs.&nbsp;&nbsp;<br /><br />The&nbsp;<a href="https://github.com/singer-io/tap-ebay" target="_blank">tap-ebay</a>&nbsp;project (developed by <a href="https://www.linkedin.com/in/drewbanin/" target="_blank">Drew Banin</a> of Fishtown/dbt) is well done. It uses the fulfillment API to allow a seller to query for their orders received via eBay's marketplace.&nbsp; I may refactor this tap using some of Drew's concepts.<br /><br /></li>
<li>Singer is very robust and powerful. It has pretty slick support for Authentication to data source and State management that I did not need in this very simple idempotent example.<br /><br /></li>
<li>This python code only returns the first page of results for the provided search terms. It would be beneficial to add in support to iterate through multiple pages of results.<br /><br /><span style="color: #ff0000;"><strong>Update 2023-06-27:</strong></span> Added support to configure the maximum search result pages to capture records from.<br /><br /></li>
<li>I'd like to extend the tap with the option of retrieving the list of search terms getting pulled from web url or an API call.<br /><br /><span style="color: #ff0000;"><strong>Update 2023-06-28:</strong></span>&nbsp;Added support to configure a public url where search terms and corresponding SKUs can be fed in from.<br /><br /></li>
<li>I will probably build a new Singer target to persist the data from this tap&nbsp;to my private API . And then I can orchestrate the pipeline on a cron with either <a href="https://dagster.io/" target="_blank">Dagster</a> or try out Pipelinewise.<br /><br /><span style="color: #ff0000;"><strong>Update 2023-06-30:</strong></span>&nbsp;Created a configurable singer target with blog post at&nbsp;<a href="/creating-singer-target-to-send-data-to-web-endpoint/">Creating Singer Target to Send Data to Web Endpoint</a></li>
</ul>
<p>&nbsp;&nbsp;</p>

            </div>

            <!-- Rating -->
            

            <!-- Post Date -->
            <p>
            <small>
                <span class="post-date"><time class="post-date" datetime="2023-06-19">19 Jun 2023</time></span>           
                
                </small>
            </p>

            <!-- Post Categories -->
            <!--<div class="after-post-cats">
                <ul class="tags mb-4">
                    
                    
                </ul>
            </div>-->
            <!-- End Categories -->

            <!-- Post Tags -->
            <div class="after-post-tags">
                <ul class="tags">
                    
                    
                    <li>
                        <a class="smoothscroll" href="/tags#data-engineering">#data engineering</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/tags#ebay">#ebay</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/tags#python">#python</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/tags#singer">#singer</a>
                    </li>
                    
                </ul>
            </div>
            <!-- End Tags -->

            <!-- Prev/Next -->
            <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
            
            <a class="prev d-block col-md-6" href="/modern-data-stack-in-a-box/" > &laquo; Modern Data Stack in a box (all Open Source)</a>



            
            
            <a class="next d-block col-md-6 text-lg-right" href="/creating-singer-target-to-send-data-to-web-endpoint/">Creating Singer Target to Send Data to Web Endpoint &raquo; </a>
            
            <div class="clearfix"></div>
            </div>
            <!-- End Categories -->

        </div>
        <!-- End Post -->

    </div>
</div>
<!-- End Article
================================================== -->

<!-- Begin Comments
================================================== -->

<!--End Comments
================================================== -->

<!-- Review with LD-JSON, adapt it for your needs if you like, but make sure you test the generated HTML source code first: 
https://search.google.com/structured-data/testing-tool/u/0/
================================================== -->

</div>


    
</div>

-<div class="jumbotron fortags">
	<div class="d-md-flex h-100">
		<div class="col-md-4 transpdark align-self-center text-center h-100">
            <div class="d-md-flex align-items-center justify-content-center h-100">
                <h2 class="d-md-block align-self-center py-1 font-weight-light">Popular Tags <span class="d-none d-md-inline">→</span></h2>
            </div>
		</div>
		<div class="col-md-8 p-5 align-self-center text-center">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#sportscarddatabase">SportsCardDatabase  (4)</a>
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#analysis">analysis  (9)</a>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#data">data  (3)</a>
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#data-engineering">data engineering  (7)</a>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#dreams">dreams  (3)</a>
            
            
            
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#ebay">eBay  (3)</a>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#favorites">favorites  (7)</a>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#python">python  (4)</a>
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#singer">singer  (3)</a>
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#snowflake">snowflake  (4)</a>
            
            
            
            
            
            
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#sportscollectors">sportscollectors  (5)</a>
            
            
            
            
            
            
            
            
            
            
            <a class="mt-1 mb-1" href="/tags#strategy">strategy  (3)</a>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
		</div>
	</div>
</div>


<!-- Begin Footer
================================================== -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                Copyright © 2023 JayGrossman.com 
            </div>
        </div>
    </div>
</footer>
<!-- End Footer
================================================== -->

</div> <!-- /.site-content -->

<!-- Scripts
================================================== -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

<script src="/assets/js/mediumish.js"></script>



<script src="/assets/js/ie10-viewport-bug-workaround.js"></script> 


<script id="dsq-count-scr" src="//.disqus.com/count.js"></script>


</body>
</html>
